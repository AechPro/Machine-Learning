#:kivy 1.0.9
#:import kivy kivy
#:import win kivy.core.window
<D3Button@Button>:
    size_hint: .3, .2
    color: 0, 0, 0, 1
    font_size: 32
    bold: True
    background_color: 1, 1, 1, 1
    halign: "center"

<Display_Object@Screen>:
    FloatLayout:
        background_color: 0, 0.5, 0.5, 1

<D3TextInput@TextInput>:
    size_hint: .2, None
    height: 35
    color: 0, 0, 0, 1
    font_size: 20
    background_color: 1, 1, 1, 1

<D3Label@Label>:
    size_hint: .2, None
    height: 45
    color: 1, 1, 1, 1
    font_size: 20
    background_color: 1, 1, 1, 1
    text_size: self.size
    halign: 'left'
    valign: 'middle'

<D3Image@Image>:
    allow_stretch:True
    size: 400, 400


<Login_Screen@Display_Object>:
    Label:
        font_size: 140
        bold: True
        text: "D3"

    D3TextInput:
        id: username
        pos_hint: {'x':0.1, 'y':0.3}
        hint_text: "Username"
        multiline: False

    D3TextInput:
        id: password
        pos_hint: {'x':0.4, 'y':0.3}
        hint_text: "Password"
        multiline: False

    D3Button:
        text: "LOGIN"
        pos_hint: {'x': 0.7, 'y':0.3}
        size_hint: 0.2, 0.1
        on_press:
            root.button_press(self.text)
            root.manager.transition.direction = 'left'

<Clean_CCD_Screen@Display_Object>:
    Label:
        text: "CLEAN CCD"
        color: 1,0,0,1
        pos_hint:{'center_x':0.5,'center_y':0.5}
        font_size: 64
    D3Button:
        text: "OK"
        pos_hint: {'center_x': 0.5, 'y':0.1}
        on_press:
            root.button_press(self.text)
            root.manager.transition.direction = 'left'

<Change_Patient_Screen@Display_Object>:
    Label:
        font_size: 140
        bold: True
        text: "D3"
    D3Button:
        text: "New Patient"
        pos_hint: {'x': 0.1, 'y':0.1}
        on_press:
            root.button_press(self.text)
            root.manager.transition.direction = 'right'

    D3Button:
        text: "Browse Patients"
        pos_hint: {'x':0.6, 'y':0.1}
        on_press:
            root.button_press(self.text)
            root.manager.transition.direction = 'left'


<Create_New_Patient_Screen@Display_Object>:

    D3Button:
        text: "Cancel"
        pos_hint: {'x': 0.1, 'y':0.1}
        on_press:
            root.button_press(self.text)
            root.manager.transition.direction = 'left'

    D3Button:
        text: "Save Patient"
        pos_hint: {'x':0.6, 'y':0.1}
        on_press:
            root.button_press(self.text)
            root.manager.transition.direction = 'left'

    D3Label:
        text: "Patient Name"
        pos_hint: {'x':0.1, 'y':0.8}

    D3TextInput:
        id: patient_name
        pos_hint: {'x':0.4, 'y':0.8}
        text: ""
        multiline: False

    D3Label:
        text: "Comments"
        pos_hint: {'x':0.1, 'y':0.6}

    D3TextInput:
        id: patient_comments
        pos_hint: {'x':0.4, 'y':0.6}
        text:""
        height:80

<Browse_Patients_Screen@Display_Object>:
    FileChooserListView:
        id: filechooser
        path: "data/patients/"

    D3Button:
        text: "Cancel"
        pos_hint: {'x': 0.1, 'y':0.1}
        on_press:
            root.button_press(self.text)
            root.manager.transition.direction = 'right'

    D3Button:
        text: "Select"
        pos_hint: {'x': 0.6, 'y':0.1}
        on_press:
            root.button_press(self.text, data=filechooser.selection)
            root.manager.transition.direction = 'left'

<Sample_View_Screen@Display_Object>:
    D3Image:
        id: sample_image
        source:

    D3Button:
        text: "Retry"
        pos_hint: {'x': 0.1, 'y':0.1}
        on_press:
            root.button_press(self.text)
            root.manager.transition.direction = 'right'

    D3Button:
        text: "Save"
        pos_hint: {'x': 0.6, 'y':0.1}
        on_press:
            root.button_press(self.text)
            root.manager.transition.direction = 'left'

<Idle_Screen@Display_Object>:
    StackLayout:
        orientation: 'tb-rl'
        Label:
            text: "Image\nPreview"
            size_hint: .2, .15
            pos_hint: {'right':1, 'top':1}
            color: 1,0,1,1
        D3Button:
            size_hint: .2, .2
            text: "Change\nPatient"
            on_press:
                root.button_press(self.text)
                root.manager.transition.direction = 'left'
        D3Button:
            size_hint: .2, .15
            text: "Save\nPatient"
            on_press:
                root.button_press(self.text)
                root.manager.transition.direction = 'left'
    Label:
        text: "Camera\nFeed"
        pos_hint:{'center_x':0.5,'center_y':0.5}
        color: 0,1,0,1
        font_size: 32

    Camera:
        size_hint: .8, .85
        pos_hint: {'x':0, 'y':.1}
        id: camera
        resolution: (640, 480)
        play: True

    D3Button:
        text: "Exit"
        size_hint: .2, .1
        pos_hint: {'left':1, 'bottom':1}
        on_press:
            root.button_press(self.text)

    StackLayout:
        orientation: 'bt-rl'
        D3Button:
            size_hint: .2, .2
            text: 'Capture'
            on_press:
                root.button_press(self.text)
                root.manager.transition.direction = 'left'

    StackLayout:
        orientation: 'lr-tb'
        D3Button:
            text: "util1"
            size_hint: 0.08,0.075
            font_size: 16
        D3Button:
            text: "util2"
            size_hint: 0.08,0.075
            font_size: 16
        D3Button:
            text: "util3"
            size_hint: 0.08,0.075
            font_size: 16
        D3Button:
            text: "util4"
            size_hint: 0.08,0.075
            font_size: 16
        D3Button:
            text: "util5"
            size_hint: 0.08,0.075
            font_size: 16
        D3Button:
            text: "util6"
            size_hint: 0.08,0.075
            font_size: 16
        D3Button:
            text: "util7"
            size_hint: 0.08,0.075
            font_size: 16
        D3Button:
            text: "util8"
            size_hint: 0.08,0.075
            font_size: 16
        D3Button:
            text: "util9"
            size_hint: 0.08,0.075
            font_size: 16
        D3Button:
            text: "util10"
            size_hint: 0.08,0.075
            font_size: 16

<Continue_Screen@Display_Object>:
    D3Button:
        size_hint: .45, .3
        pos_hint: {'x':0.025, 'y':.4}
        text: "Continue With Same\nPatient"
        on_press:
            root.button_press(self.text)
            root.manager.transition.direction = 'left'
    D3Button:
        size_hint: .45, .3
        pos_hint: {'x':0.525, 'y':.4}
        text: "Continue With Different\nPatient"
        on_press:
            root.button_press(self.text)
            root.manager.transition.direction = 'left'